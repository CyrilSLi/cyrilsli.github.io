<!DOCTYPE html>
<html lang = "en">
<head>
    <title>YouTube Player</title>
    <style>
    html, body {
        height: 100%;
        margin: 0;
    }
    </style>
</head>
<body>
    <script>
    const params = new URLSearchParams (window.location.search);
    if (params.get ("video") === null) {
        url = "https://cyrilsli.github.io/youtube_player?video=" + prompt ("Enter the YouTube URL or Video ID:").slice (-11);
        /*
        url += first + "&playlist=" + first;
        for (let i = 2; i < Infinity; i++) {
            entry = prompt ("(Video " + i + ") Enter the YouTube URL or Video ID, leave blank to finish:");
            if (entry === "") {
                break
            }
            url += "," + entry.slice (-11);
        }
        */
        if (! confirm ("OPTIONAL: Press 'Cancel' for no controls on the video or 'OK' to continue: ")) {
            url += "&controls=0";
        }
        if (! confirm ("OPTIONAL: Press 'Cancel' to loop the video or 'OK' to continue: ")) {
            url += "&loop=1";
        }
        start = prompt ("OPTIONAL: Enter the time IN SECONDS when you want the video to start, leave blank to start at the beginning:");
        if (start !== "") {
            url += "&start=" + start;
        }
        end = prompt ("OPTIONAL: Enter the time IN SECONDS when you want the video to stop, leave blank to stop at the end:");
        if (end !== "") {
            url += "&end=" + end;
        }
        console.log (url);
        open (url, "_self");
    } else {
        frame = document.createElement ("iframe");
        orig = window.location.href.split ("&") [1];
        frame.setAttribute ("width", "100%");
        frame.setAttribute ("height", "100%");
        url = "https://www.youtube-nocookie.com/embed/" + params.get("video");
        if (orig) {
            url += "?" + orig
        }
        /*
        if (params.get ("playlist") !== null) {
            url += "playlist=" + params.get ("playlist") + "&";
        }
        if (params.get ("controls") !== null) {
            url += "controls=" + params.get ("controls") + "&";
        }
        if (params.get ("loop") !== null) {
            url += "&loop=" + params.get ("loop") + "&";
        }
        if (params.get ("start") !== null) {
            url += "start=" + params.get ("start") + "&";
        }
        if (params.get ("end") !== null) {
            url += "end=" + params.get ("end") + "&";
        }
        */
        console.log (url)
        frame.setAttribute ("src", url);
        document.body.appendChild (frame);
    }
    </script>
</body>
